# ЛАБ 00. Вэб хөгжүүлэлтийн орчин бэлдэх
Энэ лабораторын ажлаар хөгжүүлэлтийн вэб сервер програм суулгах, тохируулах, хөгжүүлэлтийн орчныг бэлдэх, FTP (File Transfer Protocol) ашиглан вэб сайтын файлыг алсаас хөгжүүлэх зэрэг чадварыг эзэмших зорилготой.

Вэб програмыг хөгжүүлж ажиллуулахад бүтээгдэхүүн ажиллуулах вэб сервер (producton web server) болон хөгжүүлэлтийн вэб сервер хэрэгтэй болдог. Учир нь хөгжүүлэлтийн вэб серверийг хөгжүүлэгч өөрийн компьютертээ суулгаж түүн дээр бичиж буй кодыг турших нь хялбар, бас хугацаа хэмнэдэг. Бас нэг давуу тал бол вэб програмын кодыг бичих, турших (test) явцад вэб серверийн аюулгүй байдал, бусад алдааны тухай санаа тавих шаардлагагүй байдаг. 

## Дасгал 1. Apache HTTP server, PHP суулгаж ажиллуулах
Динамик вэб сайт, вэб програмыг ажиллуулахад HTTP сервер (жишээ нь, Apache HTTP Server), сервер талын вэб програмчлалын хэл (жишээ нь, PHP), өгөгдлийн сангийн менежмент систем (жишээ нь, MySQL) зэрэг програм хангамжийг ашиглана. Жишээгээр дурдсан програмуудыг багцалсан WAMP (Windows Apache MySQL and PHP), XAMPP, MAMP зэрэг суулгац програмаар нэг дор суулгаж тохируулах боломж бий. Эсвэл [https://httpd.apache.org/](https://httpd.apache.org/), [http://php.net/](http://php.net/), [https://www.mysql.com/](https://www.mysql.com/) зэрэг вэб сайтуудаас тус тусад нь татаж аваад суулгаж болно. [1] номын Бүлэг 2-оос вэб сервер суулгах талаар уншаарай.

Apache HTTP Server болон MySQL програм хангамжууд нь үйлдлийн системд тогтмол ажиллах сервис төрлийн програм учир дээрх програмыг суулгасны дараа сервисүүдийг асаах (start) шаардлагатай байдаг. Хэрэв вэб сервер ассан бол вэб хөтчөөсөө [http://localhost/](http://localhost/) хаягаар хандан вэб сервер зөв ажиллаж байгаа эсэхийг шалгаж болно. 

> localhost нь тухайн серверийг өөрийг нь зааж байгаа хост нэр юм. Эсвэл энэ нэрэнд харгалзах 127.0.0.1 IP хаягийг оронд нь ашиглаж болно.

Дээрх багц програмуудаар вэб сервер суулгах явцад хэд хэдэн тохиргоог үүсгэж өгдөг. Тухайлбал, аюулгүй байдлын холбогдолтой тохиргоо нь бүтээгдэхүүний вэб сервертэй адилгүй байдаг ба интернэт орчинд вэб програмаа жинхэнээсээ ажиллуулах бол бүтээгдэхүүний вэб сервер бэлдэх зааврын дагуу суулгах нь зүйтэй. Apache вэб серверийн тохиргоог httpd.conf нэртэй текст файлд хадгалдаг. Жишээ нь, WAMP програмын хувьд `c:/wamp/bin/apache[version]/config/httpd.conf` файл бий. Linux үйлдлийн систем, Ubuntu системийн хувьд `/etc/apache2/apache2.conf` нэртэй байдаг.

**Порт** Хэрэв сервер компьютер дээр өөр вэб сервер програм суусан, 80 дугаар портыг ашиглаж байгаа бол эсвэл гарааны 80 портыг өөрчлөх бол Apache HTTP Server програмын ажиллах портыг зөрүүлж тохируулах/эсвэл тэр сервер програмын портыг өөрчлөх шаардлагатай. Учир нь TCP/IP холболтын үед нэг програм нэг портыг ашиглан холболт үүсгэх боломжтой байдаг. Apache HTTP серверийн ашиглах портыг тохиргооны файлд өөрчилж болно. Тохиргооны файлд `Listen 80` мөрийг `Listen 8080` болгон өөрчлөөд сервисээ дахин асаана. Энэ тохиолдолд вэб хөтчөөс http://localhost:8080/ хаягаар Apache HTTP серверт хандана.

**Вэб нөөцийг заах үндсэн директор** WAMP суулгацаар суусан вэб програмын гарааны тохиргоогоор `DocumentRoot "c:/wamp/www/"` эсвэл `DocumentRoot "c:/wamp64/www/"` гэж вэб серверийн нөөцийг (resource) хадгалах үндсэн директорыг/замыг (webroot directory) заасан байдаг. Ubuntu системийн хувьд `/var/www/` эсвэл `/var/www/html/` гэх зам бий. Энэ замыг, мөн дараах кодод үзүүлсэн замыг өөрчилж вэб нөөцийг заах үндсэн директорыг өөрчилж болно. 

***Код 1. Вэб нөөцийг заах үндсэн директорын тохиргоо***
```
<Directory "c:/wamp/www/">
       Options Indexes FollowSymLinks
       AllowOverride None
       Require all granted
</Directory>
```

### Гүйцэтгэх ажил:
1. Apache HTTP сервер суулгаж ажиллуулах
2. Портыг 8080 болгон өөрчилж тохируулах
3. Вэб үндсэн директорыг өөрчлөх

## Дасгал 2. Энгийн PHP хуудас	
Код 1-д харуулсан PHP кодыг index.php нэртэй текст файлаар хадгалж вэб нөөцийг заах үндсэн директорт хуулна. Вэб хөтчөөс `http://localhost` эсвэл `http://localhost/index.php` хаягаар дуудаж ажиллуулна. 

***Код 2. Энгийн вэб хуудас***
```html
<!DOCTYPE html>
<!-- index.php -->
<html>
  <head>
   <meta charset="UTF-8">
  </head>
  <body>
    <p>Энэ бол статик агуулга</p>
    <?php echo "PHP скриптээр үүсгэсэн динамик агуулга"; ?>
  </body>
</html>
```

Хэрэв порт өөрчлөгдсөн бол `http://localhost:8080/index.php` гэж HTTP серверт хүсэлт илгээнэ. Вэб сервер index.html, index.php гэх мэт нэртэй файлыг нүүр хуудас (эсвэл нөөцийг заагаагүй үед харуулах нөөц) гэж үздэг бөгөөд вэб клиентээс `http://localhost:8080/` гэж хүсэхэд автоматаар эдгээр хуудсуудын аль нэгийг заасан эрэмбийн дагуу буцааж хариулдаг. 

### Гүйцэтгэх ажил:
1. Вэб хөтчийн Developer Tools->Network хэрэгслээр вэб хөтчөөс тавьсан хүсэлт (request), вэб серверээс хариулсан хариултын (response) ажиглаж HTTP толгой утгуудтай танилцаж тус бүрийн хувьд тайлбар бичнэ.
>> Хүсэлт тавихаасаа өмнө Developer Tools->Network хэрэгслийг нээсэн байх шаардлагатай.

## Дасгал 3. Олон вэб сайт
Нэг вэб сервер олон вэб сайтыг нэг домэйн болон порт дээр ажиллуулах боломжтой байдаг. Энэ боломжийг виртуал хост, виртуал директор (virtual directory) хангаж өгдөг. Виртуал директор нь URL дээрх хуурмаг зам бөгөөд тухайн зам вэб сервер дээрх өөр замыг (үндсэн хавтсаас өөр) заадаг. Хэрэв Виндоус үйлдлийн систем дээр ажиллаж байгаа бол D:/myweb директорыг виртуал директороор зааж өгсөн бол http://localhost:8081/myweb гэж хандахад D:/myweb директорт байгаа вэб сайтыг заана гэсэн үг. Өмнө хадгалсан index.php хуудсыг энэ хавтаст хуулж ажиллуулж үзнэ.

## Дасгал 4. Вэб хөгжүүлэх орчин
Вэб төслийг ихэнх тохиолдолд багаар гүйцэтгэдэг. Багаар хамтарч нэг вэб програм хөгжүүлэхийн тулд дундаа хөгжүүлэлтийн сервер (development server) ашигладаг. Хөгжүүлэлтийн сервер нь төслийн багийн хөгжүүлж буй кодуудыг нэг дор хадгалах, сервер орчинд нь ажиллуулж туршихад хэрэглэнэ. Иймд хөгжүүлэлтийн сервер дээрх бичсэн кодоо хуулахад кодыг хувилбаржуулах систем (code versioning system) ашигладаг бөгөөд өргөн ашигладаг програмууд бол SVN, Git зэрэг юм. Ер нь вэб програм хөгжүүлэхэд ганцаар ажиллаж байсан ч ийм програмыг хэрэглэж дадах хэрэгтэй. Хэрэв та Виндоус үйлдлийн системтэй бол TortoiseSVN програмыг, Линакс үйлдлийн системтэй бол GitLab програмыг суулгаж энэ хичээлийн лабораторын хичээлээр хөгжүүлэх вэб програмын кодыг хувилбаржуулаарай.
Вэб сайтыг бүхлээр хуулах, алс зайнаас вэб сайтын үндсэн хавтсыг удирдахад FTP ашигладаг ба FTP сервер програм суулгаж хэрэглэгчийн эрх, хандах хавтас, түүний тохиргоог зааж өгснөөр FTP клиент програмаас хандан хавтсыг бүрэн удирдаж болно. FileZilla Server болон Client програмуудыг нь суулгаж вэб сайтын үндсэн хавтсыг FTP хандалттай болгоорой.

## Ном зүй
[1] Robin Nixon, Learning PHP, MySQL, JavaScript, CSS & HTML5, 3rd Edition, 2014, 729 pages, ISBN: 978-1-491-94946-7 [2] Kevin Tatroe, Peter MacIntyre, Rasmus Lerdorf, Programming PHP, 3rd Edition, 2013, 540 pages, ISBN: 978-1-4493-9277-2
